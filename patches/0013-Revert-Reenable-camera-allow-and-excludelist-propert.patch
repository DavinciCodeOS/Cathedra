From a6351f915119890ec88d27ca4123e621d9d3b251 Mon Sep 17 00:00:00 2001
From: leonardo <not@existing.org>
Date: Tue, 5 Apr 2022 23:27:33 +0300
Subject: [PATCH 1/1] Revert "Reenable camera allow- and excludelist property
 labels"

This reverts commit d5a9a28d0a09330700e1df41a8306ba14dfa7fc9.
---
 common/dynamic/property_contexts | 2 ++
 common/private/property_contexts | 5 -----
 common/private/system_server.te  | 3 ---
 common/public/property.te        | 2 --
 common/vendor/property_contexts  | 2 ++
 5 files changed, 4 insertions(+), 10 deletions(-)
 create mode 100644 common/dynamic/property_contexts
 delete mode 100644 common/public/property.te
 create mode 100644 common/vendor/property_contexts

diff --git a/common/dynamic/property_contexts b/common/dynamic/property_contexts
new file mode 100644
index 0000000..2547316
--- /dev/null
+++ b/common/dynamic/property_contexts
@@ -0,0 +1,2 @@
+# Aux camera excludelist prop
+#vendor.camera.aux.packageexcludelist   u:object_r:exported_default_prop:s0
diff --git a/common/private/property_contexts b/common/private/property_contexts
index b2b7915..ed2bab7 100644
--- a/common/private/property_contexts
+++ b/common/private/property_contexts
@@ -1,8 +1,3 @@
-# Aux camera
-vendor.camera.aux.packageexcludelist   u:object_r:vendor_persist_camera_prop:s0
-vendor.camera.aux.packagelist          u:object_r:vendor_persist_camera_prop:s0
-
-# Radio
 ro.telephony.use_old_mnc_mcc_format    u:object_r:telephony_config_prop:s0
 
 # Wi-Fi Display
diff --git a/common/private/system_server.te b/common/private/system_server.te
index 075ae75..ddf7827 100644
--- a/common/private/system_server.te
+++ b/common/private/system_server.te
@@ -9,6 +9,3 @@ allow system_server pocket_service:service_manager { add find };
 allow system_server pocket_judge_sysfs:dir search;
 allow system_server pocket_judge_sysfs:file rw_file_perms;
 allow system_server pocket_service:service_manager { add find };
-
-# Let system server find auxiliary camera properties
-get_prop(system_server, vendor_persist_camera_prop)
diff --git a/common/public/property.te b/common/public/property.te
deleted file mode 100644
index 72d8694..0000000
--- a/common/public/property.te
+++ /dev/null
@@ -1,2 +0,0 @@
-# Aux camera allow/excludelist prop
-system_vendor_config_prop(vendor_persist_camera_prop)
diff --git a/common/vendor/property_contexts b/common/vendor/property_contexts
new file mode 100644
index 0000000..231c9bc
--- /dev/null
+++ b/common/vendor/property_contexts
@@ -0,0 +1,2 @@
+# Aux camera allowlist prop
+#vendor.camera.aux.packagelist          u:object_r:exported_default_prop:s0
-- 
2.35.1

